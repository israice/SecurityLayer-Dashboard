services:
  dashboard:
    build:
      context: .
      dockerfile: DASHBOARD/Dockerfile
    container_name: security-layer-dashboard
    ports:
      - "5008:5000"
    volumes:
      - dashboard-data:/app/DASHBOARD
      # Docker socket для автодеплоя (контейнер может управлять Docker)
      - /var/run/docker.sock:/var/run/docker.sock
      # Git репозиторий на хосте (ИЗМЕНИТЕ ПУТЬ на реальный)
      - /opt/testing-csv-to-server:/repo
    restart: unless-stopped
    env_file:
      - .env
    environment:
      - PYTHONUNBUFFERED=1

volumes:
  dashboard-data:
